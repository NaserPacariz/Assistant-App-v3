
<div class="task-management-container">
  <h1 class="page-title">Manage user tasks</h1>

  <!-- Task Items Section -->
  <div class="action-buttons">
    <button class="btn btn-primary create-task-button" (click)="openCreateTaskModal()">+ Create Task</button>
  </div>
  <div *ngFor="let task of tasks" class="task-item" [ngClass]="getTaskClass(task.urgency)">
    <div class="task-info">
      <p><strong>Title:</strong> {{ task.title }}</p>
      <p><strong>Description:</strong> {{ task.description }}</p>
      <p><strong>Due Date:</strong> {{ task.dueDate }}</p>
      <p><strong>Status:</strong> {{ task.status }}</p>
      <p><strong>Urgency:</strong> {{ task.urgency }}</p>
    </div>
    <div class="task-actions">
      <button class="btn btn-warning" (click)="openEditTaskModal(task)">Edit</button>
      <button class="btn btn-danger" (click)="confirmAndDeleteTask(task.id)">Delete</button>
    </div>
  </div>
  

  <!-- No Tasks Message -->
  <p *ngIf="tasks.length === 0" class="no-tasks-message">No tasks available for this user.</p>

  <!-- Add Task Modal -->
  <div class="modal" *ngIf="isAddTaskModalVisible">
    <div class="modal-content">
      <span class="close-button" (click)="closeAddTaskModal()">&times;</span>
      <h3>Add a New Task</h3>
      <form (ngSubmit)="addTask()">
        <div class="form-group">
          <label for="taskTitle">Task Title</label>
          <input id="taskTitle" type="text" [(ngModel)]="taskTitle" name="taskTitle" required />
        </div>
        <div class="form-group">
          <label for="taskDescription">Task Description</label>
          <textarea id="taskDescription" [(ngModel)]="taskDescription" name="taskDescription" required></textarea>
        </div>
        <div class="form-group">
          <label for="dueDate">Due Date</label>
          <input id="dueDate" type="date" [(ngModel)]="dueDate" name="dueDate" required />
        </div>
        <div class="form-group">
          <label for="urgency">Urgency</label>
          <select id="urgency" [(ngModel)]="urgency" name="urgency" required>
            <option value="high">High</option>
            <option value="medium">Medium</option>
            <option value="low">Low</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-success">Save</button>
          <button type="button" class="btn btn-secondary" (click)="closeAddTaskModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Task Modal -->
  <div class="modal" *ngIf="isEditModalOpen">
    <div class="modal-content">
      <span class="close-button" (click)="closeEditTaskModal()">&times;</span>
      <h3>Edit Task</h3>
      <form (ngSubmit)="updateTask()">
        <div class="form-group">
          <label for="editTitle">Task Title</label>
          <input id="editTitle" type="text" [(ngModel)]="editingTask.title" name="editTitle" required />
        </div>
        <div class="form-group">
          <label for="editDescription">Task Description</label>
          <textarea id="editDescription" [(ngModel)]="editingTask.description" name="editDescription"></textarea>
        </div>
        <div class="form-group">
          <label for="editDueDate">Due Date</label>
          <input id="editDueDate" type="date" [(ngModel)]="editingTask.dueDate" name="editDueDate" required />
        </div>
        <div class="form-group">
          <label for="editUrgency">Urgency</label>
          <select id="editUrgency" [(ngModel)]="editingTask.urgency" name="editUrgency" required>
            <option value="high">High</option>
            <option value="medium">Medium</option>
            <option value="low">Low</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-success">Update</button>
          <button type="button" class="btn btn-secondary" (click)="closeEditTaskModal()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
